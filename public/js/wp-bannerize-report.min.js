jQuery(function(a){"use strict";window.WPXBannerizeAnalyticsReport=function(){function e(){return a("#reload-banners").on("click",function(a){a.preventDefault(),n()}),a("#date-preset").on("change",function(e){var t=a(e.target).val(),r=a.parseJSON(t.replace(/\\n/g,"\n"));a("input[name='date_from']").triggerHandler("wpbones.setdate",r.start),a("input[name='date_to']").triggerHandler("wpbones.setdate",r.end),n()}),a("#categories").on("change",function(a){n()}),a(".accuracy").on("change",function(e){e.preventDefault(),i(a(e.target).data("target"))}),a(".chart-type").on("change",function(e){e.preventDefault(),c(a(e.target).data("target"))}),a(".draw-chart").on("click",function(e){e.preventDefault(),i(a(e.target).data("target"))}),s}function t(e){var t=[];a(".banners-list").find("input:checked").each(function(){t.push(a(this).data("banner_id"))});var n=a(e);return{target:"chart-morris-"+n.attr("id"),action:n.data("action"),date_from:a('input[name="date_from"]').val(),date_to:a('input[name="date_to"]').val(),category:a("select#categories").val(),accuracy:n.find("select.accuracy").val(),banners:t}}function n(){a.post(ajaxurl,{action:"wp_bannerize_banners_list",date_from:a('input[name="date_from"]').val(),date_to:a('input[name="date_to"]').val(),category:a("select#categories").val()},function(e){var t=e.data.html;a(".banners-list").html(t)})}function r(e){var t=a(e).attr("id");a(e).find(".chart-box").html('<div id="chart-morris-'+t+'"><img class="loading" src="/wp-admin/images/loading.gif" /></div>')}function i(e){r(e);var n=a(e).attr("id");a.post(ajaxurl,t(e),function(a){window.cacheImpressions[n]=a.data.chart,c(e)})}function c(e){r(e);var t=a(e).find(".chart-type").val(),n=a(e).find(".chart-box"),i=a(e).attr("id");if(n.find(".loading").remove(),"undefined"!=typeof window.cacheImpressions[i].data)switch(t){case"line":Morris.Line(window.cacheImpressions[i]);break;case"bar":window.cacheImpressions[i].barSizeRatio=.4,window.cacheImpressions[i].barOpacity=.8,window.cacheImpressions[i].stacked=!1,Morris.Bar(window.cacheImpressions[i]);break;case"bar-stacked":window.cacheImpressions[i].barSizeRatio=.4,window.cacheImpressions[i].barOpacity=.8,window.cacheImpressions[i].stacked=!0,Morris.Bar(window.cacheImpressions[i]);break;case"area":window.cacheImpressions[i].fillOpacity=.5,Morris.Area(window.cacheImpressions[i])}else n.html('<div id="chart-morris-'+i+'"></div>')}window.cacheImpressions={impressions:null,clicks:null,ctr:null};var s={version:"1.0.0",construct:e};return e()}()});